# Phase 4 — World Graph, проверка

## Цель

Проверить граф мира: узлы, разблокировка, выбор узла, переход в LoadLocation и сохранение разблокировок.

---

## 1) Вход в Play Mode

Запустите сцену (Play). Убедитесь, что Phase 1–3 работают (Boot, Meta, Save/Load).

---

## 2) Переход в WorldMapState

В UI нажмите **Go WorldMap**. Состояние должно смениться на WorldMap. В секции **WORLD MAP** отображаются узлы графа.

---

## 3) Наблюдение узлов

- По умолчанию разблокирован только узел **village** (Village).
- Остальные узлы (Forest, Swamp, Ruins) отображаются как **???** и кнопки неактивны (disabled).
- Заголовок секции: **WORLD MAP**.

---

## 4) Разблокировка узла (debug)

- Нажмите кнопку **Unlock Forest** (debug).
- Узел Forest должен стать активным и отображаться как **Forest** (кнопка активна).

---

## 5) Выбор узла и переход в LoadLocation

- Нажмите на разблокированный узел (например **Village** или **Forest**).
- Должны произойти:
  - выбор узла (подсветка ★ у выбранного при следующем открытии World Map);
  - переход в состояние **LoadLocation**.
- В консоли:
  - `[Game] Enter LoadLocation`
  - `[Game] Preparing location: <nodeId>` (village или forest и т.д.).

---

## 6) Сохранение и перезапуск

- Перейдите в **MetaHub** (Go Hub).
- Нажмите **Save Meta** (разблокировки узлов хранятся в Meta и сохраняются в тот же файл).
- Остановите Play Mode (Stop).
- Снова нажмите Play.

---

## 7) Проверка персистентности

- Перейдите в **Go WorldMap**.
- Убедитесь, что ранее разблокированный узел (например Forest) по-прежнему разблокирован и отображается корректно.
- Village остаётся разблокированным по умолчанию (новый сейв создаётся с village).

---

## Дополнительно

- **Unlock Forest** — единственная debug-кнопка для разблокировки узла в этой фазе. Остальные узлы (swamp, ruins) можно разблокировать, добавив аналогичные кнопки или вызовы `Meta.unlocks.UnlockNode("swamp")` / `UnlockNode("ruins")` в коде/консоли.
- Сцена не загружается; LoadLocationState только логирует «Preparing location».
- Граф по умолчанию: village (старт) → forest → swamp, forest → ruins.
